
/* /website/static/src/js/editor/editor_menu.js defined in bundle 'website.assets_editor' */
odoo.define('website.editor.menu',function(require){'use strict';var Dialog=require('web.Dialog');var Widget=require('web.Widget');var core=require('web.core');var Wysiwyg=require('web_editor.wysiwyg.root');var _t=core._t;var WysiwygMultizone=Wysiwyg.extend({assetLibs:Wysiwyg.prototype.assetLibs.concat(['website.compiled_assets_wysiwyg']),_getWysiwygContructor:function(){return odoo.__DEBUG__.services['web_editor.wysiwyg.multizone'];}});var EditorMenu=Widget.extend({template:'website.editorbar',xmlDependencies:['/website/static/src/xml/website.editor.xml'],events:{'click button[data-action=save]':'_onSaveClick','click button[data-action=cancel]':'_onCancelClick',},custom_events:{request_save:'_onSnippetRequestSave',get_clean_html:'_onGetCleanHTML',},willStart:function(){var self=this;this.$el=null;return this._super().then(function(){var $wrapwrap=$('#wrapwrap');$wrapwrap.removeClass('o_editable');self.editable($wrapwrap).addClass('o_editable');self.wysiwyg=self._wysiwygInstance();});},start:function(){var self=this;this.$el.css({width:'100%'});return this.wysiwyg.attachTo($('#wrapwrap')).then(function(){self.trigger_up('edit_mode');self.$el.css({width:''});});},destroy:function(){this.trigger_up('readonly_mode');this._super.apply(this,arguments);},cancel:function(reload){var self=this;var def=new Promise(function(resolve,reject){if(!self.wysiwyg.isDirty()){resolve();}else{var confirm=Dialog.confirm(self,_t("If you discard the current edition, all unsaved changes will be lost. You can cancel to return to the edition mode."),{confirm_callback:resolve,});confirm.on('closed',self,reject);}});return def.then(function(){self.trigger_up('edition_will_stopped');var $wrapwrap=$('#wrapwrap');self.editable($wrapwrap).removeClass('o_editable');if(reload!==false){window.onbeforeunload=null;self.wysiwyg.destroy();return self._reload();}else{self.wysiwyg.destroy();self.trigger_up('readonly_mode');self.trigger_up('edition_was_stopped');self.destroy();}});},save:function(reload){var self=this;this.trigger_up('edition_will_stopped');return this.wysiwyg.save(false).then(function(result){var $wrapwrap=$('#wrapwrap');self.editable($wrapwrap).removeClass('o_editable');if(result.isDirty&&reload!==false){$('body').removeClass('o_connected_user');return self._reload();}else{self.wysiwyg.destroy();self.trigger_up('edition_was_stopped');self.destroy();}});},editable:function($wrapwrap){return $wrapwrap.find('[data-oe-model]').not('.o_not_editable').filter(function(){var $parent=$(this).closest('.o_editable, .o_not_editable');return!$parent.length||$parent.hasClass('o_editable');}).not('link, script').not('[data-oe-readonly]').not('img[data-oe-field="arch"], br[data-oe-field="arch"], input[data-oe-field="arch"]').not('.oe_snippet_editor').not('hr, br, input, textarea').add('.o_editable');},_wysiwygInstance:function(){var context;this.trigger_up('context_get',{callback:function(ctx){context=ctx;},});return new WysiwygMultizone(this,{snippets:'website.snippets',recordInfo:{context:context,data_res_model:'website',data_res_id:context.website_id,}});},_reload:function(){$('body').addClass('o_wait_reload');this.wysiwyg.destroy();this.$el.hide();window.location.hash='scrollTop='+window.document.body.scrollTop;window.location.reload(true);return new Promise(function(){});},_onCancelClick:function(){this.cancel(true);},_onGetCleanHTML:function(ev){ev.data.callback(this.wysiwyg.getValue({$layout:ev.data.$layout}));},_onSnippetRequestSave:function(ev){this.save(false).then(ev.data.onSuccess,ev.data.onFailure);},_onSaveClick:function(){this.save();},});return EditorMenu;});;

/* /website/static/src/js/editor/editor_menu_translate.js defined in bundle 'website.assets_editor' */
odoo.define('website.editor.menu.translate',function(require){'use strict';require('web.dom_ready');var core=require('web.core');var Dialog=require('web.Dialog');var localStorage=require('web.local_storage');var Wysiwyg=require('web_editor.wysiwyg.root');var EditorMenu=require('website.editor.menu');var _t=core._t;var localStorageNoDialogKey='website_translator_nodialog';var TranslatorInfoDialog=Dialog.extend({template:'website.TranslatorInfoDialog',xmlDependencies:Dialog.prototype.xmlDependencies.concat(['/website/static/src/xml/translator.xml']),init:function(parent,options){this._super(parent,_.extend({title:_t("Translation Info"),buttons:[{text:_t("Ok, never show me this again"),classes:'btn-primary',close:true,click:this._onStrongOk.bind(this)},{text:_t("Ok"),close:true}],},options||{}));},_onStrongOk:function(){localStorage.setItem(localStorageNoDialogKey,true);},});var WysiwygTranslate=Wysiwyg.extend({assetLibs:Wysiwyg.prototype.assetLibs.concat(['website.compiled_assets_wysiwyg']),_getWysiwygContructor:function(){return odoo.__DEBUG__.services['web_editor.wysiwyg.multizone.translate'];}});var TranslatorMenu=EditorMenu.extend({start:function(){if(!localStorage.getItem(localStorageNoDialogKey)){new TranslatorInfoDialog(this).open();}
return this._super();},editable:function($wrapwrap){var selector='[data-oe-translation-id], '+'[data-oe-model][data-oe-id][data-oe-field], '+'[placeholder*="data-oe-translation-id="], '+'[title*="data-oe-translation-id="], '+'[alt*="data-oe-translation-id="]';var $edit=$wrapwrap.find(selector);$edit.filter(':has('+selector+')').attr('data-oe-readonly',true);return $edit.not('[data-oe-readonly]');},_wysiwygInstance:function(){var context;this.trigger_up('context_get',{callback:function(ctx){context=ctx;},});return new WysiwygTranslate(this,{lang:context.lang});},});return TranslatorMenu;});;

/* /website/static/src/js/menu/content.js defined in bundle 'website.assets_editor' */
odoo.define('website.contentMenu',function(require){'use strict';var Class=require('web.Class');var core=require('web.core');var Dialog=require('web.Dialog');var time=require('web.time');var weWidgets=require('wysiwyg.widgets');var websiteNavbarData=require('website.navbar');var websiteRootData=require('website.root');var Widget=require('web.Widget');var _t=core._t;var qweb=core.qweb;var PagePropertiesDialog=weWidgets.Dialog.extend({template:'website.pagesMenu.page_info',xmlDependencies:weWidgets.Dialog.prototype.xmlDependencies.concat(['/website/static/src/xml/website.pageProperties.xml']),events:_.extend({},weWidgets.Dialog.prototype.events,{'keyup input#page_name':'_onNameChanged','keyup input#page_url':'_onUrlChanged','change input#create_redirect':'_onCreateRedirectChanged',}),init:function(parent,page_id,options){var self=this;var serverUrl=window.location.origin+'/';var length_url=serverUrl.length;var serverUrlTrunc=serverUrl;if(length_url>30){serverUrlTrunc=serverUrl.slice(0,14)+'..'+serverUrl.slice(-14);}
this.serverUrl=serverUrl;this.serverUrlTrunc=serverUrlTrunc;this.current_page_url=window.location.pathname;this.page_id=page_id;var buttons=[{text:_t("Save"),classes:'btn-primary',click:this.save},{text:_t("Discard"),close:true},];if(options.fromPageManagement){buttons.push({text:_t("Go To Page"),icon:'fa-globe',classes:'btn-link float-right',click:function(e){window.location.href='/'+self.page.url;},});}
buttons.push({text:_t("Delete Page"),icon:'fa-trash',classes:'btn-link float-right',click:function(e){_deletePage.call(this,self.page_id,options.fromPageManagement);},});this._super(parent,_.extend({},{title:_t("Page Properties"),size:'medium',buttons:buttons,},options||{}));},willStart:function(){var defs=[this._super.apply(this,arguments)];var self=this;defs.push(this._rpc({model:'website.page',method:'get_page_info',args:[this.page_id],}).then(function(page){page[0].url=_.str.startsWith(page[0].url,'/')?page[0].url.substring(1):page[0].url;self.page=page[0];}));defs.push(this._rpc({model:'website.rewrite',method:'fields_get',}).then(function(fields){self.fields=fields;}));return Promise.all(defs);},start:function(){var self=this;var defs=[this._super.apply(this,arguments)];this.$('.ask_for_redirect').addClass('d-none');this.$('.redirect_type').addClass('d-none');this.$('.warn_about_call').addClass('d-none');defs.push(this._getPageDependencies(this.page_id).then(function(dependencies){var dep_text=[];_.each(dependencies,function(value,index){if(value.length>0){dep_text.push(value.length+' '+index.toLowerCase());}});dep_text=dep_text.join(', ');self.$('#dependencies_redirect').html(qweb.render('website.show_page_dependencies',{dependencies:dependencies,dep_text:dep_text}));self.$('#dependencies_redirect [data-toggle="popover"]').popover({container:'body',});}));defs.push(this._getSupportedMimetype().then(function(mimetypes){self.supportedMimetype=mimetypes;}));defs.push(this._getPageKeyDependencies(this.page_id).then(function(dependencies){var dep_text=[];_.each(dependencies,function(value,index){if(value.length>0){dep_text.push(value.length+' '+index.toLowerCase());}});dep_text=dep_text.join(', ');self.$('.warn_about_call').html(qweb.render('website.show_page_key_dependencies',{dependencies:dependencies,dep_text:dep_text}));self.$('.warn_about_call [data-toggle="popover"]').popover({container:'body',});}));defs.push(this._rpc({model:'res.users',method:'has_group',args:['website.group_multi_website']}).then(function(has_group){if(!has_group){self.$('#website_restriction').addClass('hidden');}}));var datepickersOptions={minDate:moment({y:1900}),maxDate:moment().add(200,'y'),calendarWeeks:true,icons:{time:'fa fa-clock-o',date:'fa fa-calendar',next:'fa fa-chevron-right',previous:'fa fa-chevron-left',up:'fa fa-chevron-up',down:'fa fa-chevron-down',},locale:moment.locale(),format:time.getLangDatetimeFormat(),widgetPositioning:{horizontal:'auto',vertical:'top',},widgetParent:'body',};if(this.page.date_publish){datepickersOptions.defaultDate=time.str_to_datetime(this.page.date_publish);}
this.$('#date_publish_container').datetimepicker(datepickersOptions);return Promise.all(defs);},destroy:function(){$('.popover').popover('hide');return this._super.apply(this,arguments);},save:function(data){var self=this;var context;this.trigger_up('context_get',{callback:function(ctx){context=ctx;},});var url=this.$('#page_url').val();var $date_publish=this.$("#date_publish");$date_publish.closest(".form-group").removeClass('o_has_error').find('.form-control, .custom-select').removeClass('is-invalid');var date_publish=$date_publish.val();if(date_publish!==""){date_publish=this._parse_date(date_publish);if(!date_publish){$date_publish.closest(".form-group").addClass('o_has_error').find('.form-control, .custom-select').addClass('is-invalid');return;}}
var params={id:this.page.id,name:this.$('#page_name').val(),url:url.replace(/\/{2,}/g,'/'),is_menu:this.$('#is_menu').prop('checked'),is_homepage:this.$('#is_homepage').prop('checked'),website_published:this.$('#is_published').prop('checked'),create_redirect:this.$('#create_redirect').prop('checked'),redirect_type:this.$('#redirect_type').val(),website_indexed:this.$('#is_indexed').prop('checked'),date_publish:date_publish,};this._rpc({model:'website.page',method:'save_page_info',args:[[context.website_id],params],}).then(function(url){var mo;self.trigger_up('main_object_request',{callback:function(value){mo=value;},});if(mo.model==='website.page'){window.location.href=url.toLowerCase();}else{window.location.reload(true);}});},_getPageDependencies:function(moID){return this._rpc({model:'website',method:'page_search_dependencies',args:[moID],});},_getPageKeyDependencies:function(moID){return this._rpc({model:'website',method:'page_search_key_dependencies',args:[moID],});},_getSupportedMimetype:function(){return this._rpc({model:'website',method:'guess_mimetype',});},_getMainObject:function(){var repr=$('html').data('main-object');var m=repr.match(/(.+)\((\d+),(.*)\)/);return{model:m[1],id:m[2]|0,};},_parse_date:function(value){var datetime=moment(value,time.getLangDatetimeFormat(),true);if(datetime.isValid()){return time.datetime_to_str(datetime.toDate());}
else{return false;}},_onUrlChanged:function(){var url=this.$('input#page_url').val();this.$('.ask_for_redirect').toggleClass('d-none',url===this.page.url);},_onNameChanged:function(){var name=this.$('input#page_name').val();var ext='.'+this.page.name.split('.').pop();if(ext in this.supportedMimetype&&ext!=='.html'){this.$('.warn_about_call').toggleClass('d-none',name===this.page.name);}},_onCreateRedirectChanged:function(){var createRedirect=this.$('input#create_redirect').prop('checked');this.$('.redirect_type').toggleClass('d-none',!createRedirect);},});var MenuEntryDialog=weWidgets.LinkDialog.extend({xmlDependencies:weWidgets.LinkDialog.prototype.xmlDependencies.concat(['/website/static/src/xml/website.contentMenu.xml']),init:function(parent,options,editable,data){this._super(parent,_.extend({title:_t("Add a menu item"),},options||{}),editable,_.extend({needLabel:true,text:data.name||'',isNewWindow:data.new_window,},data||{}));this.menuType=data.menuType;},start:function(){this.$('.o_link_dialog_preview').remove();this.$('input[name="is_new_window"], .link-style').closest('.form-group').remove();this.$modal.find('.modal-lg').removeClass('modal-lg');this.$('form.col-lg-8').removeClass('col-lg-8').addClass('col-12');this.$('label[for="o_link_dialog_label_input"]').text(_t("Menu Label"));if(this.menuType==='mega'){var $url=this.$('input[name="url"]');$url.val('#').trigger('change');$url.closest('.form-group').addClass('d-none');}
return this._super.apply(this,arguments);},save:function(){var $e=this.$('#o_link_dialog_label_input');if(!$e.val()||!$e[0].checkValidity()){$e.closest('.form-group').addClass('o_has_error').find('.form-control, .custom-select').addClass('is-invalid');$e.focus();return;}
return this._super.apply(this,arguments);},});var SelectEditMenuDialog=weWidgets.Dialog.extend({template:'website.contentMenu.dialog.select',xmlDependencies:weWidgets.Dialog.prototype.xmlDependencies.concat(['/website/static/src/xml/website.contentMenu.xml']),init:function(parent,options){var self=this;self.roots=[{id:null,name:_t("Top Menu")}];$('[data-content_menu_id]').each(function(){self.roots.push({id:$(this).data('content_menu_id'),name:$(this).attr('name')});});this._super(parent,_.extend({},{title:_t("Select a Menu"),save_text:_t("Continue")},options||{}));},save:function(){this.final_data=parseInt(this.$el.find('select').val()||null);this._super.apply(this,arguments);},});var EditMenuDialog=weWidgets.Dialog.extend({template:'website.contentMenu.dialog.edit',xmlDependencies:weWidgets.Dialog.prototype.xmlDependencies.concat(['/website/static/src/xml/website.contentMenu.xml']),events:_.extend({},weWidgets.Dialog.prototype.events,{'click a.js_add_menu':'_onAddMenuButtonClick','click button.js_delete_menu':'_onDeleteMenuButtonClick','click button.js_edit_menu':'_onEditMenuButtonClick',}),init:function(parent,options,rootID){this._super(parent,_.extend({},{title:_t("Edit Menu"),size:'medium',},options||{}));this.rootID=rootID;},willStart:function(){var defs=[this._super.apply(this,arguments)];var context;this.trigger_up('context_get',{callback:function(ctx){context=ctx;},});defs.push(this._rpc({model:'website.menu',method:'get_tree',args:[context.website_id,this.rootID],}).then(menu=>{this.menu=menu;this.rootMenuID=menu.fields['id'];this.flat=this._flatenize(menu);this.toDelete=[];}));return Promise.all(defs);},start:function(){var r=this._super.apply(this,arguments);this.$('.oe_menu_editor').nestedSortable({listType:'ul',handle:'div',items:'li',maxLevels:2,toleranceElement:'> div',forcePlaceholderSize:true,opacity:0.6,placeholder:'oe_menu_placeholder',tolerance:'pointer',attribute:'data-menu-id',expression:'()(.+)',isAllowed:(placeholder,placeholderParent,currentItem)=>{return!placeholderParent||!currentItem[0].dataset.megaMenu&&!placeholderParent[0].dataset.megaMenu;},});return r;},save:function(){var _super=this._super.bind(this);var newMenus=this.$('.oe_menu_editor').nestedSortable('toArray',{startDepthCount:0});var levels=[];var data=[];var context;this.trigger_up('context_get',{callback:function(ctx){context=ctx;},});newMenus.forEach(menu=>{if(menu.id){levels[menu.depth]=(levels[menu.depth]||0)+1;var menuFields=this.flat[menu.id].fields;menuFields['sequence']=levels[menu.depth];menuFields['parent_id']=menu['parent_id']||this.rootMenuID;data.push(menuFields);}});return this._rpc({model:'website.menu',method:'save',args:[context.website_id,{'data':data,'to_delete':this.toDelete,}],}).then(function(){return _super();});},_flatenize:function(node,_dict){_dict=_dict||{};_dict[node.fields['id']]=node;node.children.forEach(child=>{this._flatenize(child,_dict);});return _dict;},_onAddMenuButtonClick:function(ev){var menuType=ev.currentTarget.dataset.type;var dialog=new MenuEntryDialog(this,{},null,{menuType:menuType,});dialog.on('save',this,link=>{var newMenu={'fields':{'id':_.uniqueId('new-'),'name':link.text,'url':link.url,'new_window':link.isNewWindow,'is_mega_menu':menuType==='mega','sequence':0,'parent_id':false,},'children':[],'is_homepage':false,};this.flat[newMenu.fields['id']]=newMenu;this.$('.oe_menu_editor').append(qweb.render('website.contentMenu.dialog.submenu',{submenu:newMenu}));});dialog.open();},_onDeleteMenuButtonClick:function(ev){var $menu=$(ev.currentTarget).closest('[data-menu-id]');var menuID=parseInt($menu.data('menu-id'));if(menuID){this.toDelete.push(menuID);}
$menu.remove();},_onEditMenuButtonClick:function(ev){var $menu=$(ev.currentTarget).closest('[data-menu-id]');var menuID=$menu.data('menu-id');var menu=this.flat[menuID];if(menu){var dialog=new MenuEntryDialog(this,{},null,_.extend({menuType:menu.fields['is_mega_menu']?'mega':undefined,},menu.fields));dialog.on('save',this,link=>{_.extend(menu.fields,{'name':link.text,'url':link.url,'new_window':link.isNewWindow,});$menu.find('.js_menu_label').first().text(menu.fields['name']);});dialog.open();}else{Dialog.alert(null,"Could not find menu entry");}},});var PageOption=Class.extend({init:function(name,value,setValueCallback){this.name=name;this.value=value;this.isDirty=false;this.setValueCallback=setValueCallback;},setValue:function(value){if(value===undefined){value=!this.value;}
this.setValueCallback.call(this,value);this.value=value;this.isDirty=true;},});var ContentMenu=websiteNavbarData.WebsiteNavbarActionWidget.extend({xmlDependencies:['/website/static/src/xml/website.xml'],actions:_.extend({},websiteNavbarData.WebsiteNavbarActionWidget.prototype.actions||{},{edit_menu:'_editMenu',get_page_option:'_getPageOption',on_save:'_onSave',page_properties:'_pageProperties',toggle_page_option:'_togglePageOption',}),pageOptionsSetValueCallbacks:{header_overlay:function(value){$('#wrapwrap').toggleClass('o_header_overlay',value);},header_color:function(value){$('#wrapwrap > header').removeClass(this.value).addClass(value);},},start:function(){var self=this;this.pageOptions={};_.each($('.o_page_option_data'),function(el){var value=el.value;if(value==="True"){value=true;}else if(value==="False"){value=false;}
self.pageOptions[el.name]=new PageOption(el.name,value,self.pageOptionsSetValueCallbacks[el.name]);});return this._super.apply(this,arguments);},_editMenu:function(beforeReloadCallback){var self=this;return new Promise(function(resolve){function resolveWhenEditMenuDialogIsCancelled(rootID){return self._openEditMenuDialog(rootID,beforeReloadCallback).then(resolve);}
if($('[data-content_menu_id]').length){var select=new SelectEditMenuDialog(self);select.on('save',self,resolveWhenEditMenuDialogIsCancelled);select.on('cancel',self,resolve);select.open();}else{resolveWhenEditMenuDialogIsCancelled(null);}});},_openEditMenuDialog:function(rootID,beforeReloadCallback){var self=this;return new Promise(function(resolve){var dialog=new EditMenuDialog(self,{},rootID);dialog.on('save',self,function(){if(beforeReloadCallback){beforeReloadCallback().then(function(){window.location.reload(true);});}else{window.location.reload(true);}});dialog.on('cancel',self,resolve);dialog.open();});},_getPageOption:function(name){var option=this.pageOptions[name];if(!option){return Promise.reject();}
return Promise.resolve(option.value);},_onSave:function(){var self=this;var defs=_.map(this.pageOptions,function(option,optionName){if(option.isDirty){return self._togglePageOption({name:optionName,value:option.value,},true,true);}});return Promise.all(defs);},_pageProperties:function(){var mo;this.trigger_up('main_object_request',{callback:function(value){mo=value;},});var dialog=new PagePropertiesDialog(this,mo.id,{}).open();return dialog.opened();},_togglePageOption:function(params,forceSave,noReload){var mo;this.trigger_up('main_object_request',{callback:function(value){mo=value;},});if(mo.model!=='website.page'){return Promise.reject();}
var option=this.pageOptions[params.name];if(!option){return Promise.reject();}
option.setValue(params.value);if(!forceSave){return Promise.resolve();}
var vals={};vals[params.name]=option.value;var prom=this._rpc({model:'website.page',method:'write',args:[[mo.id],vals],});if(noReload){return prom;}
return prom.then(function(){window.location.reload();return new Promise(function(){});});},});var PageManagement=Widget.extend({xmlDependencies:['/website/static/src/xml/website.xml'],events:{'click a.js_page_properties':'_onPagePropertiesButtonClick','click a.js_clone_page':'_onClonePageButtonClick','click a.js_delete_page':'_onDeletePageButtonClick',},_getPageDependencies:function(moID){return this._rpc({model:'website',method:'page_search_dependencies',args:[moID],});},_onPagePropertiesButtonClick:function(ev){var moID=$(ev.currentTarget).data('id');var dialog=new PagePropertiesDialog(this,moID,{'fromPageManagement':true}).open();return dialog;},_onClonePageButtonClick:function(ev){var pageId=$(ev.currentTarget).data('id');this._rpc({model:'website.page',method:'clone_page',args:[pageId],}).then(function(path){window.location.href=path;});},_onDeletePageButtonClick:function(ev){var pageId=$(ev.currentTarget).data('id');_deletePage.call(this,pageId,true);},});function _deletePage(pageId,fromPageManagement){var self=this;new Promise(function(resolve,reject){self._getPageDependencies(pageId).then(function(dependencies){return new Promise(function(confirmResolve,confirmReject){Dialog.safeConfirm(self,"",{title:_t("Delete Page"),$content:$(qweb.render('website.delete_page',{dependencies:dependencies})),confirm_callback:confirmResolve,cancel_callback:resolve,});});}).then(function(){return self._rpc({model:'website.page',method:'unlink',args:[pageId],});}).then(function(){if(fromPageManagement){window.location.reload(true);}else{window.location.href='/';}},reject);});}
websiteNavbarData.websiteNavbarRegistry.add(ContentMenu,'#content-menu');websiteRootData.websiteRootRegistry.add(PageManagement,'#list_website_pages');return{PagePropertiesDialog:PagePropertiesDialog,ContentMenu:ContentMenu,EditMenuDialog:EditMenuDialog,MenuEntryDialog:MenuEntryDialog,SelectEditMenuDialog:SelectEditMenuDialog,};});;

/* /website/static/src/js/menu/customize.js defined in bundle 'website.assets_editor' */
odoo.define('website.customizeMenu',function(require){'use strict';var core=require('web.core');var Widget=require('web.Widget');var websiteNavbarData=require('website.navbar');var WebsiteAceEditor=require('website.ace');var qweb=core.qweb;var CustomizeMenu=Widget.extend({xmlDependencies:['/website/static/src/xml/website.editor.xml'],events:{'show.bs.dropdown':'_onDropdownShow','click .dropdown-item[data-view-key]':'_onCustomizeOptionClick',},willStart:function(){this.viewName=$(document.documentElement).data('view-xmlid');return this._super.apply(this,arguments);},start:function(){if(!this.viewName){_.defer(this.destroy.bind(this));}
if(this.$el.is('.show')){this._loadCustomizeOptions();}
return this._super.apply(this,arguments);},_doCustomize:function(viewKey){return this._rpc({route:'/website/toggle_switchable_view',params:{'view_key':viewKey,},}).then(function(){window.location.reload();return new Promise(function(){});});},_loadCustomizeOptions:function(){if(this.__customizeOptionsLoaded){return Promise.resolve();}
this.__customizeOptionsLoaded=true;var $menu=this.$el.children('.dropdown-menu');return this._rpc({route:'/website/get_switchable_related_views',params:{key:this.viewName,},}).then(function(result){var currentGroup='';if(result.length){$menu.append($('<div/>',{class:'dropdown-divider',role:'separator',}));}
_.each(result,function(item){if(currentGroup!==item.inherit_id[1]){currentGroup=item.inherit_id[1];$menu.append('<li class="dropdown-header">'+currentGroup+'</li>');}
var $a=$('<a/>',{href:'#',class:'dropdown-item','data-view-key':item.key,role:'menuitem'}).append(qweb.render('website.components.switch',{id:'switch-'+item.id,label:item.name}));$a.find('input').prop('checked',!!item.active);$menu.append($a);});});},_onCustomizeOptionClick:function(ev){ev.preventDefault();var viewKey=$(ev.currentTarget).data('viewKey');this._doCustomize(viewKey);},_onDropdownShow:function(){this._loadCustomizeOptions();},});var AceEditorMenu=websiteNavbarData.WebsiteNavbarActionWidget.extend({actions:_.extend({},websiteNavbarData.WebsiteNavbarActionWidget.prototype.actions||{},{close_all_widgets:'_hideEditor',edit:'_enterEditMode',ace:'_launchAce',}),start:function(){if(window.location.hash.substr(0,WebsiteAceEditor.prototype.hash.length)===WebsiteAceEditor.prototype.hash){this._launchAce();}
return this._super.apply(this,arguments);},_enterEditMode:function(){this._hideEditor();},_hideEditor:function(){if(this.globalEditor){this.globalEditor.do_hide();}},_launchAce:function(){var self=this;var prom=new Promise(function(resolve,reject){self.trigger_up('action_demand',{actionName:'close_all_widgets',onSuccess:resolve,});});prom.then(function(){if(self.globalEditor){self.globalEditor.do_show();return Promise.resolve();}else{var currentHash=window.location.hash;var indexOfView=currentHash.indexOf("?res=");var initialResID=undefined;if(indexOfView>=0){initialResID=currentHash.substr(indexOfView+("?res=".length));var parsedResID=parseInt(initialResID,10);if(parsedResID){initialResID=parsedResID;}}
self.globalEditor=new WebsiteAceEditor(self,$(document.documentElement).data('view-xmlid'),{initialResID:initialResID,defaultBundlesRestriction:['web.assets_frontend','web.assets_frontend_minimal','web.assets_frontend_lazy',],});return self.globalEditor.appendTo(document.body);}});return prom;},});websiteNavbarData.websiteNavbarRegistry.add(CustomizeMenu,'#customize-menu');websiteNavbarData.websiteNavbarRegistry.add(AceEditorMenu,'#html_editor');return CustomizeMenu;});;

/* /website/static/src/js/menu/debug_manager.js defined in bundle 'website.assets_editor' */
odoo.define('website.debugManager',function(require){'use strict';var config=require('web.config');var DebugManager=require('web.DebugManager');var websiteNavbarData=require('website.navbar');var DebugManagerMenu=websiteNavbarData.WebsiteNavbar.include({start:function(){if(config.isDebug()){new DebugManager(this).prependTo(this.$('.o_menu_systray'));}
return this._super.apply(this,arguments);},});return DebugManagerMenu;});;

/* /website/static/src/js/menu/edit.js defined in bundle 'website.assets_editor' */
odoo.define('website.editMenu',function(require){'use strict';var core=require('web.core');var EditorMenu=require('website.editor.menu');var websiteNavbarData=require('website.navbar');var _t=core._t;var EditPageMenu=websiteNavbarData.WebsiteNavbarActionWidget.extend({assetLibs:['web_editor.compiled_assets_wysiwyg','website.compiled_assets_wysiwyg'],xmlDependencies:['/website/static/src/xml/website.editor.xml'],actions:_.extend({},websiteNavbarData.WebsiteNavbarActionWidget.prototype.actions,{edit:'_startEditMode',on_save:'_onSave',}),custom_events:_.extend({},websiteNavbarData.WebsiteNavbarActionWidget.custom_events||{},{content_will_be_destroyed:'_onContentWillBeDestroyed',content_was_recreated:'_onContentWasRecreated',snippet_will_be_cloned:'_onSnippetWillBeCloned',snippet_cloned:'_onSnippetCloned',snippet_dropped:'_onSnippetDropped',edition_will_stopped:'_onEditionWillStop',edition_was_stopped:'_onEditionWasStopped',}),init:function(){this._super.apply(this,arguments);var context;this.trigger_up('context_get',{extra:true,callback:function(ctx){context=ctx;},});this._editorAutoStart=(context.editable&&window.location.search.indexOf('enable_editor')>=0);var url=window.location.href.replace(/([?&])&*enable_editor[^&#]*&?/,'\$1');window.history.replaceState({},null,url);},start:function(){var def=this._super.apply(this,arguments);if(this._editorAutoStart){return Promise.all([def,this._startEditMode()]);}
var $wrap=this._targetForEdition().filter('#wrapwrap.homepage').find('#wrap');if($wrap.length&&$wrap.html().trim()===''){this.$welcomeMessage=$(core.qweb.render('website.homepage_editor_welcome_message'));this.$welcomeMessage.addClass('o_homepage_editor_welcome_message');this.$welcomeMessage.css('min-height',$wrap.parent('main').height()-($wrap.outerHeight(true)-$wrap.height()));$wrap.empty().append(this.$welcomeMessage);}
setTimeout(function(){if($('.o_tooltip.o_animated').length){$('.o_tooltip_container').addClass('show');}},1000);return def;},_startEditMode:async function(){var self=this;if(this.editModeEnable){return;}
this.trigger_up('widgets_stop_request',{$target:this._targetForEdition(),});if(this.$welcomeMessage){this.$welcomeMessage.detach();}
this.editModeEnable=true;await new EditorMenu(this).prependTo(document.body);var $target=this._targetForEdition();this.$editorMessageElements=$target.find('.oe_structure.oe_empty, [data-oe-type="html"]').not('[data-editor-message]').attr('data-editor-message',_t('DRAG BUILDING BLOCKS HERE'));var res=await new Promise(function(resolve,reject){self.trigger_up('widgets_start_request',{editableMode:true,onSuccess:resolve,onFailure:reject,});});this.$editorMessageElements.mousedown();return res;},_onSave:function(){},_targetForEdition:function(){return $('#wrapwrap');},_onContentWillBeDestroyed:function(ev){this.trigger_up('widgets_stop_request',{$target:ev.data.$target,});},_onContentWasRecreated:function(ev){this.trigger_up('widgets_start_request',{editableMode:true,$target:ev.data.$target,});},_onEditionWillStop:function(ev){this.$editorMessageElements&&this.$editorMessageElements.removeAttr('data-editor-message');this.trigger_up('widgets_stop_request',{$target:this._targetForEdition(),});},_onEditionWasStopped:function(ev){this.trigger_up('widgets_start_request',{$target:this._targetForEdition(),});this.editModeEnable=false;},_onSnippetWillBeCloned:function(ev){this.trigger_up('widgets_stop_request',{$target:ev.data.$target,});},_onSnippetCloned:function(ev){this.trigger_up('widgets_start_request',{editableMode:true,$target:ev.data.$target,});if(ev.data.$origin){this.trigger_up('widgets_start_request',{editableMode:true,$target:ev.data.$origin,});}},_onSnippetDropped:function(ev){this.trigger_up('widgets_start_request',{editableMode:true,$target:ev.data.$target,});},});websiteNavbarData.websiteNavbarRegistry.add(EditPageMenu,'#edit-page-menu');});;

/* /website/static/src/js/menu/mobile_view.js defined in bundle 'website.assets_editor' */
odoo.define('website.mobile',function(require){'use strict';var core=require('web.core');var Dialog=require('web.Dialog');var websiteNavbarData=require('website.navbar');var _t=core._t;var MobilePreviewDialog=Dialog.extend({start:function(){var self=this;this.$modal.addClass('oe_mobile_preview');this.$modal.on('click','.modal-header',function(){self.$el.toggleClass('o_invert_orientation');});this.$iframe=$('<iframe/>',{id:'mobile-viewport',src:$.param.querystring(window.location.href,'mobilepreview'),});this.$iframe.on('load',function(e){self.$iframe.contents().find('body').removeClass('o_connected_user');self.$iframe.contents().find('#oe_main_menu_navbar').remove();});this.$iframe.appendTo(this.$el);return this._super.apply(this,arguments);},});var MobileMenu=websiteNavbarData.WebsiteNavbarActionWidget.extend({actions:_.extend({},websiteNavbarData.WebsiteNavbarActionWidget.prototype.actions||{},{'show-mobile-preview':'_onMobilePreviewClick',}),_onMobilePreviewClick:function(){new MobilePreviewDialog(this,{title:_t('Mobile preview')+' <span class="fa fa-refresh"/>',}).open();},});websiteNavbarData.websiteNavbarRegistry.add(MobileMenu,'#mobile-menu');return{MobileMenu:MobileMenu,MobilePreviewDialog:MobilePreviewDialog,};});;

/* /website/static/src/js/menu/new_content.js defined in bundle 'website.assets_editor' */
odoo.define('website.newMenu',function(require){'use strict';var core=require('web.core');var Dialog=require('web.Dialog');var websiteNavbarData=require('website.navbar');var wUtils=require('website.utils');var qweb=core.qweb;var _t=core._t;var enableFlag='enable_new_content';var NewContentMenu=websiteNavbarData.WebsiteNavbarActionWidget.extend({xmlDependencies:['/website/static/src/xml/website.editor.xml'],actions:_.extend({},websiteNavbarData.WebsiteNavbarActionWidget.prototype.actions||{},{close_all_widgets:'_handleCloseDemand',new_page:'_createNewPage',}),events:_.extend({},websiteNavbarData.WebsiteNavbarActionWidget.prototype.events||{},{'click':'_onBackgroundClick','click [data-module-id]':'_onModuleIdClick','keydown':'_onBackgroundKeydown',}),newContentText:{failed:_t('Failed to install "%s"'),installInProgress:_t("The installation of an App is already in progress."),installNeeded:_t('Do you want to install the "%s" App?'),installPleaseWait:_t('Installing "%s"'),},start:function(){this.pendingInstall=false;this.$newContentMenuChoices=this.$('#o_new_content_menu_choices');var $modules=this.$newContentMenuChoices.find('.o_new_content_element');_.each($modules,function(el,index){var $el=$(el);$el.data('original-index',index);if($el.data('module-id')){$el.appendTo($el.parent());$el.find('a i, a p').addClass('text-muted');}});this.$firstLink=this.$newContentMenuChoices.find('a:eq(0)');this.$lastLink=this.$newContentMenuChoices.find('a:last');if($.deparam.querystring()[enableFlag]!==undefined){this._showMenu();}
return this._super.apply(this,arguments);},_createNewPage:function(){return wUtils.prompt({id:'editor_new_page',window_title:_t("New Page"),input:_t("Page Title"),init:function(){var $group=this.$dialog.find('div.form-group');$group.removeClass('mb0');var $add=$('<div/>',{'class':'form-group mb0 row'}).append($('<span/>',{'class':'offset-md-3 col-md-9 text-left'}).append(qweb.render('website.components.switch',{id:'switch_addTo_menu',label:_t("Add to menu")})));$add.find('input').prop('checked',true);$group.after($add);}}).then(function(result){var val=result.val;var $dialog=result.dialog;if(!val){return;}
var url='/website/add/'+encodeURIComponent(val);if($dialog.find('input[type="checkbox"]').is(':checked'))url+='?add_menu=1';document.location=url;return new Promise(function(){});});},_handleCloseDemand:function(){this._hideMenu();},_focusFirstLink:function(){this.$firstLink.focus();},_focusLastLink:function(){this.$lastLink.focus();},_hideMenu:function(){this.$newContentMenuChoices.addClass('o_hidden');$('body').removeClass('o_new_content_open');},_install:function(moduleId){this.pendingInstall=true;$('body').css('pointer-events','none');return this._rpc({model:'ir.module.module',method:'button_immediate_install',args:[[moduleId]],}).guardedCatch(function(){$('body').css('pointer-events','');});},_showMenu:function(){var self=this;return new Promise(function(resolve,reject){self.trigger_up('action_demand',{actionName:'close_all_widgets',onSuccess:resolve,});}).then(function(){self.firstTab=true;self.$newContentMenuChoices.removeClass('o_hidden');$('body').addClass('o_new_content_open');self.$('> a').focus();});},_onBackgroundClick:function(ev){if(this.$newContentMenuChoices.hasClass('o_hidden')){this._showMenu();}else{this._hideMenu();}},_onBackgroundKeydown:function(ev){switch(ev.which){case $.ui.keyCode.ESCAPE:this._hideMenu();break;case $.ui.keyCode.TAB:if(ev.shiftKey){if(this.firstTab||document.activeElement===this.$firstLink[0]){this._focusLastLink();ev.preventDefault();}}else{if(this.firstTab||document.activeElement===this.$lastLink[0]){this._focusFirstLink();ev.preventDefault();}}
this.firstTab=false;break;}},_onModuleIdClick:function(ev){var self=this;var $el=$(ev.currentTarget);var $i=$el.find('a i');var $p=$el.find('a p');var title=$p.text();var content='';var buttons;var moduleId=$el.data('module-id');var name=$el.data('module-shortdesc');ev.stopPropagation();ev.preventDefault();if(this.pendingInstall){content=this.newContentText.installInProgress;}else{content=_.str.sprintf(this.newContentText.installNeeded,name);buttons=[{text:_t("Install"),classes:'btn-primary',close:true,click:function(){var $finalPosition=self.$newContentMenuChoices.find('.o_new_content_element:not([data-module-id])').filter(function(){return $(this).data('original-index')<$el.data('original-index');}).last();if($finalPosition){$el.fadeTo(400,0,function(){$el.insertAfter($finalPosition);$i.removeClass().addClass('fa fa-spin fa-spinner fa-pulse');$p.removeClass('text-muted').text(_.str.sprintf(self.newContentText.installPleaseWait,name));$el.fadeTo(1000,1);});}
self._install(moduleId).then(function(){window.location.href=window.location.origin+window.location.pathname+'?'+enableFlag;},function(){$i.removeClass().addClass('fa fa-exclamation-triangle');$p.text(_.str.sprintf(self.newContentText.failed,name));});}},{text:_t("Cancel"),close:true,}];}
new Dialog(this,{title:title,size:'medium',$content:$('<p/>',{text:content}),buttons:buttons}).open();},});websiteNavbarData.websiteNavbarRegistry.add(NewContentMenu,'.o_new_content_menu');return NewContentMenu;});;

/* /website/static/src/js/menu/seo.js defined in bundle 'website.assets_editor' */
odoo.define('website.seo',function(require){'use strict';var core=require('web.core');var Class=require('web.Class');var Dialog=require('web.Dialog');var mixins=require('web.mixins');var rpc=require('web.rpc');var Widget=require('web.Widget');var weWidgets=require('wysiwyg.widgets');var websiteNavbarData=require('website.navbar');var _t=core._t;var WORD_SEPARATORS_REGEX='([\\u2000-\\u206F\\u2E00-\\u2E7F\'!"#\\$%&\\(\\)\\*\\+,\\-\\.\\/:;<=>\\?¿¡@\\[\\]\\^_`\\{\\|\\}~\\s]+|^|$)';var Suggestion=Widget.extend({template:'website.seo_suggestion',xmlDependencies:['/website/static/src/xml/website.seo.xml'],events:{'click .o_seo_suggestion':'select',},init:function(parent,options){this.keyword=options.keyword;this._super(parent);},select:function(){this.trigger('selected',this.keyword);},});var SuggestionList=Widget.extend({template:'website.seo_suggestion_list',xmlDependencies:['/website/static/src/xml/website.seo.xml'],init:function(parent,options){this.root=options.root;this.language=options.language;this.htmlPage=options.htmlPage;this._super(parent);},start:function(){this.refresh();},refresh:function(){var self=this;self.$el.append(_t("Loading..."));var context;this.trigger_up('context_get',{callback:function(ctx){context=ctx;},});var language=self.language||context.lang.toLowerCase();this._rpc({route:'/website/seo_suggest',params:{keywords:self.root,lang:language,},}).then(function(keyword_list){self.addSuggestions(JSON.parse(keyword_list));});},addSuggestions:function(keywords){var self=this;self.$el.empty();var regex=new RegExp(WORD_SEPARATORS_REGEX+self.root+WORD_SEPARATORS_REGEX,'gi');keywords=_.map(_.uniq(keywords),function(word){return word.replace(regex,'').trim();});_.each(keywords,function(keyword){if(keyword){var suggestion=new Suggestion(self,{keyword:keyword,});suggestion.on('selected',self,function(word,language){self.trigger('selected',word,language);});suggestion.appendTo(self.$el);}});},});var Keyword=Widget.extend({template:'website.seo_keyword',xmlDependencies:['/website/static/src/xml/website.seo.xml'],events:{'click a[data-action=remove-keyword]':'destroy',},init:function(parent,options){this.keyword=options.word;this.language=options.language;this.htmlPage=options.htmlPage;this.used_h1=this.htmlPage.isInHeading1(this.keyword);this.used_h2=this.htmlPage.isInHeading2(this.keyword);this.used_content=this.htmlPage.isInBody(this.keyword);this._super(parent);},start:function(){var self=this;this.$('.o_seo_keyword_suggestion').empty();this.suggestionList=new SuggestionList(this,{root:this.keyword,language:this.language,htmlPage:this.htmlPage,});this.suggestionList.on('selected',this,function(word,language){this.trigger('selected',word,language);});return this.suggestionList.appendTo(this.$('.o_seo_keyword_suggestion')).then(function(){self.htmlPage.on('title-changed',self,self._updateTitle);self.htmlPage.on('description-changed',self,self._updateDescription);self._updateTitle();self._updateDescription();});},destroy:function(){this.trigger('removed');this._super();},_updateTitle:function(){var $title=this.$('.js_seo_keyword_title');if(this.htmlPage.isInTitle(this.keyword)){$title.css('visibility','visible');}else{$title.css('visibility','hidden');}},_updateDescription:function(){var $description=this.$('.js_seo_keyword_description');if(this.htmlPage.isInDescription(this.keyword)){$description.css('visibility','visible');}else{$description.css('visibility','hidden');}},});var KeywordList=Widget.extend({template:'website.seo_list',xmlDependencies:['/website/static/src/xml/website.seo.xml'],maxKeywords:10,init:function(parent,options){this.htmlPage=options.htmlPage;this._super(parent);},start:function(){var self=this;var existingKeywords=self.htmlPage.keywords();if(existingKeywords.length>0){_.each(existingKeywords,function(word){self.add.call(self,word);});}},keywords:function(){var result=[];this.$('.js_seo_keyword').each(function(){result.push($(this).data('keyword'));});return result;},isFull:function(){return this.keywords().length>=this.maxKeywords;},exists:function(word){return _.contains(this.keywords(),word);},add:function(candidate,language){var self=this;var word=candidate?candidate.replace(/[,;.:<>]+/g,' ').replace(/ +/g,' ').trim().toLowerCase():'';if(word&&!self.isFull()&&!self.exists(word)){var keyword=new Keyword(self,{word:word,language:language,htmlPage:this.htmlPage,});keyword.on('removed',self,function(){self.trigger('list-not-full');self.trigger('content-updated',true);});keyword.on('selected',self,function(word,language){self.trigger('selected',word,language);});keyword.appendTo(self.$el);}
if(self.isFull()){self.trigger('list-full');}
self.trigger('content-updated');},});var Preview=Widget.extend({template:'website.seo_preview',xmlDependencies:['/website/static/src/xml/website.seo.xml'],init:function(parent,options){this.title=options.title;this.url=options.url;this.description=options.description;if(this.description.length>160){this.description=this.description.substring(0,159)+'…';}
this._super(parent);},});var HtmlPage=Class.extend(mixins.PropertiesMixin,{init:function(){mixins.PropertiesMixin.init.call(this);this.initTitle=this.title();this.defaultTitle=$('meta[name="default_title"]').attr('content');this.initDescription=this.description();},url:function(){return window.location.origin+window.location.pathname;},title:function(){return $('title').text().trim();},changeTitle:function(title){$('title').text(title.trim()||this.defaultTitle);this.trigger('title-changed',title);},description:function(){return($('meta[name=description]').attr('content')||'').trim();},changeDescription:function(description){$('meta[name=description]').attr('content',description);this.trigger('description-changed',description);},keywords:function(){var $keywords=$('meta[name=keywords]');var parsed=($keywords.length>0)&&$keywords.attr('content')&&$keywords.attr('content').split(',');return(parsed&&parsed[0])?parsed:[];},changeKeywords:function(keywords){$('meta[name=keywords]').attr('content',keywords.join(','));},headers:function(tag){return $('#wrap '+tag).map(function(){return $(this).text();});},getOgMeta:function(){var ogImageUrl=$('meta[property="og:image"]').attr('content');var title=$('meta[property="og:title"]').attr('content');var description=$('meta[property="og:description"]').attr('content');return{ogImageUrl:ogImageUrl&&ogImageUrl.replace(window.location.origin,''),metaTitle:title,metaDescription:description,};},images:function(){return $('#wrap img').map(function(){var $img=$(this);return{src:$img.attr('src'),alt:$img.attr('alt'),};});},company:function(){return $('html').attr('data-oe-company-name');},bodyText:function(){return $('body').children().not('.oe_seo_configuration').text();},heading1:function(){return $('body').children().not('.oe_seo_configuration').find('h1').text();},heading2:function(){return $('body').children().not('.oe_seo_configuration').find('h2').text();},isInBody:function(text){return new RegExp(WORD_SEPARATORS_REGEX+text+WORD_SEPARATORS_REGEX,'gi').test(this.bodyText());},isInTitle:function(text){return new RegExp(WORD_SEPARATORS_REGEX+text+WORD_SEPARATORS_REGEX,'gi').test(this.title());},isInDescription:function(text){return new RegExp(WORD_SEPARATORS_REGEX+text+WORD_SEPARATORS_REGEX,'gi').test(this.description());},isInHeading1:function(text){return new RegExp(WORD_SEPARATORS_REGEX+text+WORD_SEPARATORS_REGEX,'gi').test(this.heading1());},isInHeading2:function(text){return new RegExp(WORD_SEPARATORS_REGEX+text+WORD_SEPARATORS_REGEX,'gi').test(this.heading2());},});var MetaTitleDescription=Widget.extend({template:'website.seo_meta_title_description',xmlDependencies:['/website/static/src/xml/website.seo.xml'],events:{'input input[name=website_meta_title]':'_titleChanged','input textarea[name=website_meta_description]':'_descriptionOnInput','change textarea[name=website_meta_description]':'_descriptionOnChange',},maxRecommendedDescriptionSize:300,minRecommendedDescriptionSize:50,showDescriptionTooSmall:false,init:function(parent,options){this.htmlPage=options.htmlPage;this.canEditTitle=!!options.canEditTitle;this.canEditDescription=!!options.canEditDescription;this.isIndexed=!!options.isIndexed;this.previewDescription=options.previewDescription;this._super(parent,options);},start:function(){this.$title=this.$('input[name=website_meta_title]');this.$description=this.$('textarea[name=website_meta_description]');this.$warning=this.$('div#website_meta_description_warning');this.$preview=this.$('.js_seo_preview');if(!this.canEditTitle){this.$title.attr('disabled',true);}
if(!this.canEditDescription){this.$description.attr('disabled',true);}
if(this.htmlPage.title().trim()!==this.htmlPage.defaultTitle.trim()){this.$title.val(this.htmlPage.title());}
if(this.htmlPage.description().trim()!==this.previewDescription){this.$description.val(this.htmlPage.description());}
this._descriptionOnChange();},getTitle:function(){return this.$title.val().trim()||this.htmlPage.defaultTitle;},getDescription:function(){return this.getRealDescription()||this.previewDescription;},getRealDescription:function(){return this.$description.val()||'';},_titleChanged:function(){var self=this;self._renderPreview();self.trigger('title-changed');},_descriptionOnChange:function(){this.showDescriptionTooSmall=true;this._descriptionOnInput();},_descriptionOnInput:function(){var length=this.getDescription().length;if(length>=this.minRecommendedDescriptionSize){this.showDescriptionTooSmall=true;}else if(length===0){this.showDescriptionTooSmall=false;}
if(length>this.maxRecommendedDescriptionSize){this.$warning.text(_t('Your description looks too long.')).show();}else if(this.showDescriptionTooSmall&&length<this.minRecommendedDescriptionSize){this.$warning.text(_t('Your description looks too short.')).show();}else{this.$warning.hide();}
this._renderPreview();this.trigger('description-changed');},_renderPreview:function(){var indexed=this.isIndexed;var preview="";if(indexed){preview=new Preview(this,{title:this.getTitle(),description:this.getDescription(),url:this.htmlPage.url(),});}else{preview=new Preview(this,{description:_t("You have hidden this page from search results. It won't be indexed by search engines."),});}
this.$preview.empty();preview.appendTo(this.$preview);},});var MetaKeywords=Widget.extend({template:'website.seo_meta_keywords',xmlDependencies:['/website/static/src/xml/website.seo.xml'],events:{'keyup input[name=website_meta_keywords]':'_confirmKeyword','click button[data-action=add]':'_addKeyword',},init:function(parent,options){this.htmlPage=options.htmlPage;this._super(parent,options);},start:function(){var self=this;this.$input=this.$('input[name=website_meta_keywords]');this.keywordList=new KeywordList(this,{htmlPage:this.htmlPage});this.keywordList.on('list-full',this,function(){self.$input.attr({readonly:'readonly',placeholder:"Remove a keyword first"});self.$('button[data-action=add]').prop('disabled',true).addClass('disabled');});this.keywordList.on('list-not-full',this,function(){self.$input.removeAttr('readonly').attr('placeholder',"");self.$('button[data-action=add]').prop('disabled',false).removeClass('disabled');});this.keywordList.on('selected',this,function(word,language){self.keywordList.add(word,language);});this.keywordList.on('content-updated',this,function(removed){self._updateTable(removed);});return this.keywordList.insertAfter(this.$('.table thead')).then(function(){self._getLanguages();self._updateTable();});},_addKeyword:function(){var $language=this.$('select[name=seo_page_language]');var keyword=this.$input.val();var language=$language.val().toLowerCase();this.keywordList.add(keyword,language);this.$input.val('').focus();},_confirmKeyword:function(e){if(e.keyCode===13){this._addKeyword();}},_getLanguages:function(){var self=this;var context;this.trigger_up('context_get',{callback:function(ctx){context=ctx;},});this._rpc({route:'/website/get_languages',}).then(function(data){self.$('#language-box').html(core.qweb.render('Configurator.language_promote',{'language':data,'def_lang':context.lang}));});},_updateTable:function(removed){var min=removed?1:0;if(this.keywordList.keywords().length>min){this.$('table').show();}else{this.$('table').hide();}},});var MetaImageSelector=Widget.extend({template:'website.seo_meta_image_selector',xmlDependencies:['/website/static/src/xml/website.seo.xml'],events:{'click .o_meta_img_upload':'_onClickUploadImg','click .o_meta_img':'_onClickSelectImg',},init:function(parent,data){this.metaTitle=data.title||'';this.activeMetaImg=data.metaImg;this.serverUrl=data.htmlpage.url();data.pageImages.unshift(_.str.sprintf('/web/image/website/%s/logo',odoo.session_info.website_id));data.pageImages.unshift(_.str.sprintf('/web/image/website/%s/social_default_image',odoo.session_info.website_id));this.images=_.uniq(data.pageImages);this.customImgUrl=_.contains(data.pageImages,data.metaImg)?false:data.metaImg;this.previewDescription=data.previewDescription;this._setDescription(this.previewDescription);this._super(parent);},setTitle:function(title){this.metaTitle=title;this._updateTemplateBody();},setDescription:function(description){this._setDescription(description);this._updateTemplateBody();},_setDescription:function(description){this.metaDescription=description||this.previewDescription;if(this.metaDescription.length>160){this.metaDescription=this.metaDescription.substring(0,159)+'…';}},_updateTemplateBody:function(){this.$el.empty();this.images=_.uniq(this.images);this.$el.append(core.qweb.render('website.og_image_body',{widget:this}));},_onClickSelectImg:function(ev){var $img=$(ev.currentTarget);this.activeMetaImg=$img.find('img').attr('src');this._updateTemplateBody();},_onClickUploadImg:function(ev){var self=this;var $image=$('<img/>');var mediaDialog=new weWidgets.MediaDialog(this,{onlyImages:true,res_model:'ir.ui.view',},$image[0]);mediaDialog.open();mediaDialog.on('save',this,function(image){self.activeMetaImg=image.src;self.customImgUrl=image.src;self._updateTemplateBody();});},});var SeoConfigurator=Dialog.extend({template:'website.seo_configuration',xmlDependencies:Dialog.prototype.xmlDependencies.concat(['/website/static/src/xml/website.seo.xml']),canEditTitle:false,canEditDescription:false,canEditKeywords:false,canEditLanguage:false,init:function(parent,options){options=options||{};_.defaults(options,{title:_t('Optimize SEO'),buttons:[{text:_t('Save'),classes:'btn-primary',click:this.update},{text:_t('Discard'),close:true},],});this._super(parent,options);},start:function(){var self=this;this.$modal.addClass('oe_seo_configuration');this.htmlPage=new HtmlPage();this.disableUnsavableFields().then(function(){self.metaImageSelector=new MetaImageSelector(self,{htmlpage:self.htmlPage,title:self.htmlPage.getOgMeta().metaTitle,metaImg:self.metaImg||self.htmlPage.getOgMeta().ogImageUrl,pageImages:_.pluck(self.htmlPage.images().get(),'src'),previewDescription:_t('The description will be generated by social media based on page content unless you specify one.'),});self.metaImageSelector.appendTo(self.$('.js_seo_image'));self.metaTitleDescription=new MetaTitleDescription(self,{htmlPage:self.htmlPage,canEditTitle:self.canEditTitle,canEditDescription:self.canEditDescription,isIndexed:self.isIndexed,previewDescription:_t('The description will be generated by search engines based on page content unless you specify one.'),});self.metaTitleDescription.on('title-changed',self,self.titleChanged);self.metaTitleDescription.on('description-changed',self,self.descriptionChanged);self.metaTitleDescription.appendTo(self.$('.js_seo_meta_title_description'));self.metaKeywords=new MetaKeywords(self,{htmlPage:self.htmlPage});self.metaKeywords.appendTo(self.$('.js_seo_meta_keywords'));});},destroy:function(){if(!this.savedData){this.htmlPage.changeTitle(this.htmlPage.initTitle);this.htmlPage.changeDescription(this.htmlPage.initDescription);}
this._super.apply(this,arguments);},disableUnsavableFields:function(){var self=this;return this.loadMetaData().then(function(data){self.reloadOnSave=data.website_id===undefined?false:!data.website_id;self.isIndexed=(data&&('website_indexed'in data))?data.website_indexed:true;self.canEditTitle=data&&('website_meta_title'in data);self.canEditDescription=data&&('website_meta_description'in data);self.canEditKeywords=data&&('website_meta_keywords'in data);self.metaImg=data.website_meta_og_img;if(!self.canEditTitle&&!self.canEditDescription&&!self.canEditKeywords){self.$footer.find('button[data-action=update]').attr('disabled',true);}});},update:function(){var self=this;var data={};if(this.canEditTitle){data.website_meta_title=this.metaTitleDescription.$title.val();}
if(this.canEditDescription){data.website_meta_description=this.metaTitleDescription.$description.val();}
if(this.canEditKeywords){data.website_meta_keywords=this.metaKeywords.keywordList.keywords().join(', ');}
data.website_meta_og_img=this.metaImageSelector.activeMetaImg;this.saveMetaData(data).then(function(){if(self.reloadOnSave){window.location.href=self.htmlPage.url();}else{self.htmlPage.changeKeywords(self.metaKeywords.keywordList.keywords());self.savedData=true;self.close();}});},getMainObject:function(){var mainObject;this.trigger_up('main_object_request',{callback:function(value){mainObject=value;},});return mainObject;},getSeoObject:function(){var seoObject;this.trigger_up('seo_object_request',{callback:function(value){seoObject=value;},});return seoObject;},loadMetaData:function(){var obj=this.getSeoObject()||this.getMainObject();return new Promise(function(resolve,reject){if(!obj){resolve(null);}else{var fields=['website_meta_title','website_meta_description','website_meta_keywords','website_meta_og_img'];if(obj.model==='website.page'){fields.push('website_indexed');fields.push('website_id');}
rpc.query({model:obj.model,method:'read',args:[[obj.id],fields],}).then(function(data){if(data.length){var meta=data[0];meta.model=obj.model;resolve(meta);}else{resolve(null);}}).guardedCatch(reject);}});},saveMetaData:function(data){var obj=this.getSeoObject()||this.getMainObject();if(!obj){return Promise.reject();}else{return this._rpc({model:obj.model,method:'write',args:[[obj.id],data],});}},titleChanged:function(){var self=this;_.defer(function(){var title=self.metaTitleDescription.getTitle();self.htmlPage.changeTitle(title);self.metaImageSelector.setTitle(title);});},descriptionChanged:function(){var self=this;_.defer(function(){var description=self.metaTitleDescription.getRealDescription();self.htmlPage.changeDescription(description);self.metaImageSelector.setDescription(description);});},});var SeoMenu=websiteNavbarData.WebsiteNavbarActionWidget.extend({actions:_.extend({},websiteNavbarData.WebsiteNavbarActionWidget.prototype.actions||{},{'promote-current-page':'_promoteCurrentPage',}),init:function(parent,options){this._super(parent,options);if($.deparam.querystring().enable_seo!==undefined){this._promoteCurrentPage();}},_promoteCurrentPage:function(){new SeoConfigurator(this).open();},});websiteNavbarData.websiteNavbarRegistry.add(SeoMenu,'#promote-menu');return{SeoConfigurator:SeoConfigurator,SeoMenu:SeoMenu,};});;

/* /website/static/src/js/menu/translate.js defined in bundle 'website.assets_editor' */
odoo.define('website.translateMenu',function(require){'use strict';var utils=require('web.utils');var TranslatorMenu=require('website.editor.menu.translate');var websiteNavbarData=require('website.navbar');var TranslatePageMenu=websiteNavbarData.WebsiteNavbarActionWidget.extend({assetLibs:['web_editor.compiled_assets_wysiwyg','website.compiled_assets_wysiwyg'],actions:_.extend({},websiteNavbarData.WebsiteNavbar.prototype.actions||{},{edit_master:'_goToMasterPage',translate:'_startTranslateMode',}),start:function(){var context;this.trigger_up('context_get',{extra:true,callback:function(ctx){context=ctx;},});this._mustEditTranslations=context.edit_translations;if(this._mustEditTranslations){var url=window.location.href.replace(/([?&])&*edit_translations[^&#]*&?/,'\$1');window.history.replaceState({},null,url);this._startTranslateMode();}
return this._super.apply(this,arguments);},_goToMasterPage:function(){var current=document.createElement('a');current.href=window.location.toString();current.search+=(current.search?'&':'?')+'enable_editor=1';current.pathname=current.pathname.substr(current.pathname.indexOf('/',1));var link=document.createElement('a');link.href='/website/lang/default';link.search+=(link.search?'&':'?')+'r='+encodeURIComponent(current.pathname+current.search+current.hash);window.location=link.href;return new Promise(function(){});},_startTranslateMode:function(){if(!this._mustEditTranslations){window.location.search+='&edit_translations';return new Promise(function(){});}
var translator=new TranslatorMenu(this);$('.dropdown-menu').on('click','.o_editable',function(ev){ev.stopPropagation();});return translator.prependTo(document.body);},});websiteNavbarData.websiteNavbarRegistry.add(TranslatePageMenu,'.o_menu_systray:has([data-action="translate"])');});;

/* /website/static/src/js/tours/banner.js defined in bundle 'website.assets_editor' */
odoo.define("website.tour.banner",function(require){"use strict";var core=require("web.core");var tour=require("web_tour.tour");var _t=core._t;tour.register("banner",{url:"/",},[{trigger:"a[data-action=edit]",content:_t("<b>Click Edit</b> to start designing your homepage."),extra_trigger:".homepage",position:"bottom",},{trigger:"#snippet_structure .oe_snippet:eq(1) .oe_snippet_thumbnail",content:_t("Drag the <i>Cover</i> block and drop it in your page."),position:"bottom",run:"drag_and_drop #wrap",},{trigger:"#wrapwrap .s_cover h1",content:_t("<b>Click on a text</b> to start editing it. <i>It's that easy to edit your content!</i>"),position:"bottom",run:"text",},{trigger:".o_we_customize_panel",extra_trigger:"#wrapwrap .s_cover h1:not(:containsExact(\"Catchy Headline\"))",content:_t("Customize any block through this menu. Try to change the background color of this block."),position:"right",},{trigger:'.o_we_add_snippet_btn',content:_t("Go back to the blocks menu."),position:'bottom',},{trigger:"#snippet_structure .oe_snippet:eq(3) .oe_snippet_thumbnail",content:_t("Drag another block in your page, below the cover."),position:"bottom",run:"drag_and_drop #wrap",},{trigger:"button[data-action=save]",content:_t("Click the <b>Save</b> button."),position:"bottom",},{trigger:"a[data-action=show-mobile-preview]",content:_t("Good Job! You have designed your homepage. Let's check how this page looks like on <b>mobile devices</b>."),position:"bottom",},{trigger:".modal-dialog:has(#mobile-viewport) button[data-dismiss=modal]",content:_t("After having checked how it looks on mobile, <b>close the preview</b>."),position:"right",},{trigger:"#new-content-menu > a",content:_t("<p><b>Your homepage is live.</b></p><p>Let's add a new page for your site.</p>"),position:"bottom",},{trigger:"a[data-action=new_page]",content:_t("<p><b>Click here</b> to create a new page.</p>"),position:"bottom",},{trigger:".modal-dialog #editor_new_page input[type=text]",content:_t("<p>Enter a title for the page.</p>"),position:"bottom",},{trigger:".modal-footer button.btn-primary.btn-continue",content:_t("Click on <b>Continue</b> to create the page."),position:"bottom",},{trigger:"#snippet_structure .oe_snippet:eq(3) .oe_snippet_thumbnail",content:_t("Drag the block and drop it in your new page."),position:"bottom",run:"drag_and_drop #wrap",},{trigger:"button[data-action=save]",content:_t("Click the <b>Save</b> button."),position:"bottom",},{trigger:".js_publish_management .js_publish_btn",content:_t("<b>That's it!</b><p>Your page is all set to go live. Click the <b>Publish</b> button to publish it on the website.</p>"),position:"bottom",}]);});odoo.define("website.tour.contact",function(require){"use strict";var core=require("web.core");var tour=require("web_tour.tour");var _t=core._t;tour.register("contact",{url:"/page/contactus",},[{trigger:"li#customize-menu",content:_t("<b>Install a contact form</b> to improve this page."),extra_trigger:"#o_contact_mail",position:"bottom",},{trigger:"li#install_apps",content:_t("<b>Install new apps</b> to get more features. Let's install the <i>'Contact form'</i> app."),position:"bottom",}]);});;

/* /website/static/src/js/tours/customize.js defined in bundle 'website.assets_editor' */
odoo.define('website.tour.customize',function(require){'use strict';var core=require('web.core');var tour=require('web_tour.tour');var _t=core._t;tour.register('theme_customize',{url:'/',},[{trigger:'button.o_theme_customize_color_primary, button.o_theme_customize_color_alpha',content:_t("Click here to choose your main branding color.<br/>It will recompute the palette with suggested matching colors."),position:'bottom',}]);});;

/* /website/static/src/js/widgets/ace.js defined in bundle 'website.assets_editor' */
odoo.define("website.ace",function(require){"use strict";var AceEditor=require('web_editor.ace');var WebsiteAceEditor=AceEditor.extend({hash:'#advanced-view-editor',do_hide:function(){this._super.apply(this,arguments);window.location.hash="";},_displayResource:function(){this._super.apply(this,arguments);this._updateHash();},_saveResources:function(){return this._super.apply(this,arguments).then((function(){var defs=[];if(this.currentType==='xml'){var selectedView=_.findWhere(this.views,{id:this._getSelectedResource()});var context;this.trigger_up('context_get',{callback:function(ctx){context=ctx;},});defs.push(this._rpc({model:'ir.ui.view',method:'search_read',fields:['id'],domain:[['key','=',selectedView.key],['website_id','=',context.website_id]],}).then((function(view){if(view[0]){this._updateHash(view[0].id);}}).bind(this)));}
return Promise.all(defs).then((function(){window.location.reload();return new Promise(function(){});}));}).bind(this));},_resetResource:function(){return this._super.apply(this,arguments).then((function(){window.location.reload();return new Promise(function(){});}).bind(this));},_updateHash:function(resID){window.location.hash=this.hash+"?res="+(resID||this._getSelectedResource());},});return WebsiteAceEditor;});;

/* /website/static/src/js/widgets/theme.js defined in bundle 'website.assets_editor' */
odoo.define('website.theme',function(require){'use strict';var config=require('web.config');var core=require('web.core');var Dialog=require('web.Dialog');var Widget=require('web.Widget');var weWidgets=require('wysiwyg.widgets');var ColorpickerDialog=require('web.ColorpickerDialog');var websiteNavbarData=require('website.navbar');var _t=core._t;var templateDef=null;var QuickEdit=Widget.extend({xmlDependencies:['/website/static/src/xml/website.editor.xml'],template:'website.theme_customize_active_input',events:{'keydown input':'_onInputKeydown','click .btn-secondary':'_onResetClick','focusout':'_onFocusOut',},init:function(parent,value,unit){this._super.apply(this,arguments);this.value=value;this.unit=unit;this._onFocusOut=_.debounce(this._onFocusOut,100);},start:function(){this.$input=this.$('input');this.$input.select();return this._super.apply(this,arguments);},_save:function(value){if(value===undefined){value=parseFloat(this.$input.val());value=isNaN(value)?'null':(value+this.unit);}
this.trigger_up('QuickEdit:save',{value:value,});this.destroy();},_onInputKeydown:function(ev){var inputValue=this.$input.val();var value=0;if(inputValue!==''){value=parseFloat(this.$input.val());if(isNaN(value)){return;}}
switch(ev.which){case $.ui.keyCode.UP:this.$input.val(value+1);break;case $.ui.keyCode.DOWN:this.$input.val(value-1);break;case $.ui.keyCode.ENTER:this._save();break;}},_onFocusOut:function(){if(!this.$el.has(document.activeElement).length){this._save();}},_onResetClick:function(){this._save('null');},});var ThemeCustomizeDialog=Dialog.extend({xmlDependencies:(Dialog.prototype.xmlDependencies||[]).concat(['/website/static/src/xml/website.editor.xml']),template:'website.theme_customize',events:{'change .o_theme_customize_option_input':'_onChange','click .checked .o_theme_customize_option_input[type="radio"]':'_onChange','click .o_theme_customize_add_google_font':'_onAddGoogleFontClick','click .o_theme_customize_delete_google_font':'_onDeleteGoogleFontClick',},CUSTOM_BODY_IMAGE_XML_ID:'option_custom_body_image',init:function(parent,options){options=options||{};this._super(parent,_.extend({title:_t("Customize Theme"),buttons:[],},options));this.defaultTab=options.tab||0;this.fontVariables=[];},willStart:function(){if(templateDef===null){templateDef=this._rpc({model:'ir.ui.view',method:'read_template',args:['website.theme_customize'],}).then(function(data){if(!/^<templates>/.test(data)){data=_.str.sprintf('<templates>%s</templates>',data);}
return core.qweb.add_template(data);});}
return Promise.all([this._super.apply(this,arguments),templateDef]);},start:function(){var self=this;this.PX_BY_REM=parseFloat($(document.documentElement).css('font-size'));this.$modal.addClass('o_theme_customize_modal');this.style=window.getComputedStyle(document.documentElement);this.nbFonts=parseInt(this.style.getPropertyValue('--number-of-fonts'));var googleFontsProperty=this.style.getPropertyValue('--google-fonts').trim();this.googleFonts=googleFontsProperty?googleFontsProperty.split(/\s*,\s*/g):[];var $tabs;var loadDef=this._loadViews().then(function(data){self._generateDialogHTML(data);$tabs=self.$('[data-toggle="tab"]');if($tabs.length<=1){$tabs.closest('.nav').addClass('d-none');}});this.opened().then(function(){$tabs.eq(self.defaultTab).tab('show');var $primary=self.$('.o_theme_customize_color[data-color="primary"]');var $alpha=self.$('.o_theme_customize_color[data-color="alpha"]');var $secondary=self.$('.o_theme_customize_color[data-color="secondary"]');var $beta=self.$('.o_theme_customize_color[data-color="beta"]');var sameAlphaPrimary=$primary.css('background-color')===$alpha.css('background-color');var sameBetaSecondary=$secondary.css('background-color')===$beta.css('background-color');if(!sameAlphaPrimary){$alpha.prev().text(_t("Extra Color"));}
if(!sameBetaSecondary){$beta.prev().text(_t("Extra Color"));}
$primary=$primary.closest('.o_theme_customize_option');$alpha=$alpha.closest('.o_theme_customize_option');$secondary=$secondary.closest('.o_theme_customize_option');$beta=$beta.closest('.o_theme_customize_option');$primary.toggleClass('d-none',sameAlphaPrimary);$secondary.toggleClass('d-none',sameBetaSecondary);if(!sameAlphaPrimary&&sameBetaSecondary){$beta.insertBefore($alpha);}else if(sameAlphaPrimary&&!sameBetaSecondary){$secondary.insertAfter($alpha);}});return Promise.all([this._super.apply(this,arguments),loadDef]);},_chooseBodyCustomImage:function(){var self=this;var def=new Promise(function(resolve,reject){var $image=$('<img/>');var editor=new weWidgets.MediaDialog(self,{mediaWidth:1920,onlyImages:true,firstFilters:['background'],},$image[0]);editor.on('save',self,function(media){self._rpc({model:'ir.model.data',method:'get_object_reference',args:['website',self.CUSTOM_BODY_IMAGE_XML_ID],}).then(function(data){return self._rpc({model:'ir.ui.view',method:'save',args:[data[1],'#wrapwrap { background-image: url("'+media.src+'"); }','//style',],});}).then(resolve).guardedCatch(resolve);});editor.on('cancel',self,function(){resolve();});editor.open();});return def;},_generateDialogHTML:function(data){var self=this;var $contents=this.$el.children('content');if($contents.length===0){return;}
$contents.remove();this.$el.append(core.qweb.render('website.theme_customize_modal_layout'));var $navLinksContainer=this.$('.nav');var $navContents=this.$('.tab-content');_.each($contents,function(content){var $content=$(content);var contentID=_.uniqueId('content-');$navLinksContainer.append($('<li/>',{class:'nav-item mb-1',}).append($('<a/>',{href:'#'+contentID,class:'nav-link','data-toggle':'tab',text:$content.attr('string'),})));var $navContent=$(core.qweb.render('website.theme_customize_modal_content',{id:contentID,title:$content.attr('title'),}));$navContents.append($navContent);var $optionsContainer=$navContent.find('.o_options_container');_processItems($content.children(),$optionsContainer,false);});this.$('[title]').tooltip();this.$inputs=self.$('.o_theme_customize_option_input');_.each(this.$inputs.filter('[data-xmlid=""]'),function(input){var $input=$(input);var $neighbors=self.$inputs.filter('[name="'+$input.attr('name')+'"]').not($input);if($neighbors.length&&!$neighbors.filter(':checked').length){$input.prop('checked',true);}});this._setActive();this._updateValues();function _processItems($items,$container,isSelectionContainer){var optionsName=_.uniqueId('option-');var alone=($items.length===1);_.each($items,function(item){var $item=$(item);var $element;switch(item.tagName){case'OPT':var widgetName=$item.data('widget');var xmlid=$item.data('xmlid');var renderingOptions=_.extend({string:$item.attr('string')||xmlid&&data.names[xmlid.split(',')[0].trim()],icon:$item.data('icon'),font:$item.data('font'),},$item.data());var checked;if(widgetName==='auto'){var propValue=self.style.getPropertyValue('--'+$item.data('variable')).trim();checked=(propValue===$item.attr('data-value'));}else{checked=(xmlid===undefined||xmlid&&!_.difference(self._getXMLIDs($item),data.enabled).length);}
$element=$(core.qweb.render('website.theme_customize_modal_option',_.extend({alone:alone,name:xmlid===undefined&&widgetName!=='auto'?_.uniqueId('option-'):optionsName,id:$item.attr('id')||_.uniqueId('o_theme_customize_input_id_'),checked:checked,widget:widgetName,},renderingOptions)));$element.find('input').addClass('o_theme_customize_option_input').attr({'data-xmlid':xmlid,'data-enable':$item.data('enable'),'data-disable':$item.data('disable'),'data-reload':$item.data('reload'),});if(widgetName){var $widget=$(core.qweb.render('website.theme_customize_widget_'+widgetName,renderingOptions));$element.find('label').append($widget);}
if(isSelectionContainer){$element.removeClass("my-1 flex-grow-0").addClass("dropdown-item p-0");$element.find('label').addClass('justify-content-start').attr('data-font-id',$item.data('font'));}
break;case'LIST':$element=$('<div/>',{class:'py-1 px-2 o_theme_customize_option_list'});_processItems($item.children(),$element,false);break;case'SELECTION':$element=$(core.qweb.render('website.theme_customize_dropdown_option'));_processItems($item.children(),$element.find('.o_theme_customize_selection'),true);break;case'FONTSELECTION':var $options=$();var variable=$item.data('variable');self.fontVariables.push(variable);_.times(self.nbFonts,function(font){$options=$options.add($('<opt/>',{'data-widget':'auto','data-variable':variable,'data-value':font+1,'data-font':font+1,}));});$element=$(core.qweb.render('website.theme_customize_dropdown_option'));var $selection=$element.find('.o_theme_customize_selection');_processItems($options,$selection,true);if(self.googleFonts.length){var $googleFontItems=$selection.children().slice(-self.googleFonts.length);_.each($googleFontItems,function(el,index){$(el).append(core.qweb.render('website.theme_customize_delete_font',{'index':index,}));});}
$selection.append($(core.qweb.render('website.theme_customize_add_google_font_option',{'variable':variable,})));break;default:_processItems($item.children(),$container,false);return;}
if($container.hasClass('form-row')){var $col=$('<div/>',{class:_.str.sprintf('col-%s',$item.data('col')||6),});if(item.tagName==='LIST'){$col.addClass('mt-2');$col.append($('<h6/>',{text:$item.attr('string')}));}
$col.append($element);$element=$col;}
$element.attr('data-depends',$item.data('depends'));$container.append($element);});}},_loadViews:function(){return this._rpc({route:'/website/theme_customize_get',params:{'xml_ids':this._getXMLIDs(this.$inputs||this.$('[data-xmlid]')),},});},_getInputs:function(string){if(!string){return $();}
return this.$inputs.filter('#'+string.replace(/\s*,\s*/g,', #'));},_getXMLIDs:function($inputs){var xmlIDs=[];_.each($inputs,function(input){var $input=$(input);var xmlID=$input.data('xmlid');if(xmlID){xmlIDs=xmlIDs.concat(xmlID.split(/\s*,\s*/));}});return xmlIDs;},_makeGoogleFontsCusto:function(values){values=values?_.clone(values):{};if(this.googleFonts.length){values['google-fonts']="('"+this.googleFonts.join("', '")+"')";}else{values['google-fonts']='null';}
return this._makeSCSSCusto('/website/static/src/scss/options/user_values.scss',values).then(function(){window.location.hash='theme=true';window.location.reload();});},_makeSCSSCusto:function(url,values){return this._rpc({route:'/website/make_scss_custo',params:{'url':url,'values':values,},});},_pickColor:function(colorElement){var self=this;var $color=$(colorElement);var colorName=$color.data('color');var colorType=$color.data('colorType');return new Promise(function(resolve,reject){var colorpicker=new ColorpickerDialog(self,{defaultColor:$color.css('background-color'),});var chosenColor=undefined;colorpicker.on('colorpicker:saved',self,function(ev){ev.stopPropagation();chosenColor=ev.data.cssColor;});colorpicker.on('closed',self,function(ev){if(chosenColor===undefined){resolve();return;}
var baseURL='/website/static/src/scss/options/colors/';var url=_.str.sprintf('%suser_%scolor_palette.scss',baseURL,(colorType?(colorType+'_'):''));var colors={};colors[colorName]=chosenColor;if(colorName==='alpha'){colors['beta']='null';colors['gamma']='null';colors['delta']='null';colors['epsilon']='null';}
self._makeSCSSCusto(url,colors).then(resolve).guardedCatch(resolve);});colorpicker.open();});},_processChange:function($inputs){var self=this;var defs=[];var $options=$inputs.closest('.o_theme_customize_option');var $bodyImageInputs=$inputs.filter('[data-xmlid*="website.'+this.CUSTOM_BODY_IMAGE_XML_ID+'"]:checked');defs=defs.concat(_.map($bodyImageInputs,function(){return self._chooseBodyCustomImage();}));var $colors=$options.find('.o_theme_customize_color');defs=defs.concat(_.map($colors,function(colorElement){return self._pickColor($(colorElement));}));var $inputsData=$options.find('.o_theme_customize_input');defs=defs.concat(_.map($inputsData,function(inputData,i){return self._quickEdit($(inputData));}));var $autoWidgetOptions=$options.has('.o_theme_customize_auto');if($autoWidgetOptions.length>1){$autoWidgetOptions=$autoWidgetOptions.has('input:checked');}
var $autosData=$autoWidgetOptions.find('.o_theme_customize_auto');defs=defs.concat(_.map($autosData,function(autoData){return self._setAuto($(autoData));}));return Promise.all(defs);},_quickEdit:function($inputData){var self=this;var text=$inputData.text().trim();var value=parseFloat(text)||'';var unit=text.match(/([^\s\d]+)$/)[1];return new Promise(function(resolve,reject){var qEdit=new QuickEdit(self,value,unit);qEdit.on('QuickEdit:save',self,function(ev){ev.stopPropagation();var value=ev.data.value;if($inputData.data('unit')==='rem'&&unit==='px'&&value!=='null'){value=parseFloat(value)/self.PX_BY_REM+'rem';}
var values={};values[$inputData.data('variable')]=value;self._makeSCSSCusto('/website/static/src/scss/options/user_values.scss',values).then(resolve).guardedCatch(resolve);});qEdit.appendTo($inputData.closest('.o_theme_customize_option'));});},_setAuto:function($autoData){var self=this;var values={};var isChecked=$autoData.siblings('.o_theme_customize_option_input').prop('checked');values[$autoData.data('variable')]=isChecked?$autoData.data('value'):'null';return new Promise(function(resolve,reject){self._makeSCSSCusto('/website/static/src/scss/options/user_values.scss',values).then(resolve).guardedCatch(resolve);});},_setActive:function(){var self=this;var $radioXMLInputs=this.$inputs.filter('[type="radio"][data-xmlid]');var optionNames=_.uniq(_.map($radioXMLInputs,function(option){return option.name;}));_.each(optionNames,function(optionName){var $inputs=$radioXMLInputs.filter('[name="'+optionName+'"]:checked');if($inputs.length>1){$inputs.prop('checked',false);var maxNbXMLIDs=-1;var $maxInput=null;_.each($inputs,function(input){var $input=$(input);var xmlID=$input.data('xmlid');var nbXMLIDs=xmlID?xmlID.split(',').length:0;if(nbXMLIDs>=maxNbXMLIDs){maxNbXMLIDs=nbXMLIDs;$maxInput=$input;}});$maxInput.prop('checked',true);}});var $enable=this.$inputs.filter(':checked');this.$('label').removeClass('checked');$enable.closest('label:not(.o_switch)').addClass('checked');var $sets=this.$inputs.filter('[data-enable], [data-disable]').not('[data-xmlid]');_.each($sets,function(set){var $set=$(set);var checked=true;if(self._getInputs($set.data('enable')).not(':checked').length){checked=false;}
if(self._getInputs($set.data('disable')).filter(':checked').length){checked=false;}
$set.prop('checked',checked).closest('label:not(.o_switch)').toggleClass('checked',checked);});_.each(this.$('[data-depends]'),function(hidden){var $hidden=$(hidden);var depends=$hidden.data('depends');var dependencies=depends?depends.split(/\s*,\s*/g):[];var enabled=_.all(dependencies,function(dep){var toBeChecked=(dep[0]!=='!');if(!toBeChecked){dep=dep.substr(1);}
return self._getInputs(dep).is(':checked')===toBeChecked;});$hidden.toggleClass('d-none',!enabled);});},_updateStyle:function(enable,disable,reload){var self=this;var $loading=$('<i/>',{class:'fa fa-refresh fa-spin'});this.$modal.find('.modal-title').append($loading);if(reload||config.isDebug('assets')){window.location.href=$.param.querystring('/website/theme_customize_reload',{href:window.location.href,enable:(enable||[]).join(','),disable:(disable||[]).join(','),tab:this.$('.nav-link.active').parent().index(),});return Promise.resolve();}
return this._rpc({route:'/website/theme_customize',params:{'enable':enable,'disable':disable,'get_bundle':true,},}).then(function(bundles){var $allLinks=$();var defs=_.map(bundles,function(bundleURLs,bundleName){var $links=$('link[href*="'+bundleName+'"]');$allLinks=$allLinks.add($links);var $newLinks=$();_.each(bundleURLs,function(url){$newLinks=$newLinks.add($('<link/>',{type:'text/css',rel:'stylesheet',href:url,}));});var linksLoaded=new Promise(function(resolve,reject){var nbLoaded=0;$newLinks.on('load',function(){if(++nbLoaded>=$newLinks.length){resolve();}});$newLinks.on('error',function(){reject();window.location.hash='theme=true';window.location.reload();});});$links.last().after($newLinks);return linksLoaded;});return Promise.all(defs).then(function(){$loading.remove();$allLinks.remove();}).guardedCatch(function(){$loading.remove();$allLinks.remove();});}).then(function(){self.trigger_up('widgets_start_request');});},_updateValues:function(){var self=this;_.each(this.$('.o_theme_customize_color'),function(el){var $el=$(el);var value=self.style.getPropertyValue('--'+$el.data('color')).trim();$el.css('background-color',value);});_.each(this.$('.o_theme_customize_input'),function(el){var $el=$(el);var value=self.style.getPropertyValue('--'+$el.data('variable')).trim();if(_.str.endsWith(value,'rem')){value=parseFloat(value)*self.PX_BY_REM+'px';}
var $span=$el.find('span');$span.removeClass().text('');switch(value){case'':case'false':case'true':$span.addClass('fa fa-ban text-danger');break;default:$span.text(value);}});_.each(this.$('.o_theme_customize_dropdown'),function(dropdown){var $dropdown=$(dropdown);$dropdown.find('.dropdown-item.active').removeClass('active');var $checked=$dropdown.find('label.checked');$checked.closest('.dropdown-item').addClass('active');var classes='btn btn-light dropdown-toggle w-100 o_text_overflow o_theme_customize_dropdown_btn';if($checked.data('font-id')){classes+=_.str.sprintf(' o_theme_customize_option_font_%s',$checked.data('font-id'));}
var $btn=$('<button/>',{type:'button',class:classes,'data-toggle':'dropdown',html:$dropdown.find('label.checked > span').text()||'&#8203;',});$dropdown.find('.o_theme_customize_dropdown_btn').remove();$dropdown.prepend($btn);});},_onChange:function(ev){var self=this;var $option=$(ev.currentTarget);if($option.is(':disabled')){return;}
this.$inputs.prop('disabled',true);var $options=$option;var checked=$option.is(':checked');if(checked){var $inputs;$inputs=this._getInputs($option.data('enable'));$options=$options.add($inputs.filter(':not(:checked)'));$inputs.prop('checked',true);$inputs=this._getInputs($option.data('disable'));$options=$options.add($inputs.filter(':checked'));$inputs.prop('checked',false);}
var optionNames=_.uniq(_.map($options,function(option){return option.name;}));$options=this.$inputs.filter(function(i,input){return _.contains(optionNames,input.name);});var $enable=$options.filter('[data-xmlid]:checked');var $disable=$options.filter('[data-xmlid]:not(:checked)');this._setActive();self._processChange($options).then(function(){return self._updateStyle(self._getXMLIDs($enable),self._getXMLIDs($disable),$option.data('reload')&&window.location.href.match(new RegExp($option.data('reload'))));}).then(function(){self._updateValues();self.$inputs.prop('disabled',false);});},_onAddGoogleFontClick:function(ev){var self=this;var variable=$(ev.currentTarget).data('variable');new Dialog(this,{title:_t("Add a Google Font"),$content:$(core.qweb.render('website.dialog.addGoogleFont')),buttons:[{text:_t("Save"),classes:'btn-primary',click:function(){var $input=this.$('.o_input_google_font');var m=$input.val().match(/\bfamily=([\w+]+)/);if(!m){$input.addClass('is-invalid');return;}
var font=m[1].replace(/\+/g,' ');self.googleFonts.push(font);var values={};values[variable]=self.nbFonts+1;return self._makeGoogleFontsCusto(values);},},{text:_t("Discard"),close:true,},],}).open();},_onDeleteGoogleFontClick:function(ev){var self=this;ev.preventDefault();var nbBaseFonts=this.nbFonts-this.googleFonts.length;var googleFontIndex=$(ev.currentTarget).data('fontIndex');this.googleFonts.splice(googleFontIndex,1);var values={};_.each(this.fontVariables,function(variable){var value=parseInt(self.style.getPropertyValue('--'+variable));var googleFontValue=nbBaseFonts+1+googleFontIndex;if(value===googleFontValue){values[variable]=1;}else if(value>googleFontValue){values[variable]=value-1;}});return this._makeGoogleFontsCusto(values);},});var ThemeCustomizeMenu=websiteNavbarData.WebsiteNavbarActionWidget.extend({actions:_.extend({},websiteNavbarData.WebsiteNavbarActionWidget.prototype.actions||{},{'customize_theme':'_openThemeCustomizeDialog',}),start:function(){if((window.location.hash||'').indexOf('theme=true')>0){var tab=window.location.hash.match(/tab=(\d+)/);this._openThemeCustomizeDialog(tab?tab[1]:false);window.location.hash='';}
return this._super.apply(this,arguments);},_openThemeCustomizeDialog:function(tab){return new ThemeCustomizeDialog(this,{tab:tab}).open();},});websiteNavbarData.websiteNavbarRegistry.add(ThemeCustomizeMenu,'#theme_customize');return ThemeCustomizeDialog;});;

/* /website_form/static/src/js/website_form_editor.js defined in bundle 'website.assets_editor' */
odoo.define('website_form_editor',function(require){'use strict';var ajax=require('web.ajax');var core=require('web.core');var Dialog=require('web.Dialog');var FormEditorRegistry=require('website_form.form_editor_registry');var options=require('web_editor.snippets.options');var wUtils=require('website.utils');var Wysiwyg=require('web_editor.wysiwyg');var qweb=core.qweb;var _t=core._t;var FormEditorDialog=Dialog.extend({init:function(parent,options){this._super(parent,_.extend({buttons:[{text:_t('Save'),classes:'btn-primary',close:true,click:this._onSaveModal.bind(this),},{text:_t('Cancel'),close:true}],},options));},_onSaveModal:function(){if(this.$el[0].checkValidity()){this.trigger_up('save');}else{_.each(this.$el.find('.o_website_form_input'),function(input){var $field=$(input).closest('.form-field');$field.removeClass('o_has_error').find('.form-control, .custom-select').removeClass('is-invalid');if(!input.checkValidity()){$field.addClass('o_has_error').find('.form-control, .custom-select').addClass('is-invalid');}});}},});options.registry['website_form_editor']=options.Class.extend({xmlDependencies:['/website_form/static/src/xml/website_form_editor.xml'],start:function(){this.$target.addClass('o_fake_not_editable').attr('contentEditable',false);this.$target.find('label:not(:has(span)), label span, .o_form_heading').addClass('o_fake_editable').attr('contentEditable',true);return this._super.apply(this,arguments);},fields:function(){return this.fields_promise||this.fetch_model_fields();},fetch_model_fields:function(){return this._rpc({model:"ir.model",method:"get_authorized_fields",args:[this.$target.closest('form').attr('data-model_name')],}).then(function(fields){_.each(fields,function(field,field_name){field.name=field_name;});return fields;});},website_form_model_modal:function(previewMode,value,$li){var self=this;this._rpc({model:"ir.model",method:"search_read",args:[[['website_form_access','=',true]],['id','model','name','website_form_label','website_form_key']],}).then(function(models){self.models=models;var selectedModel=self.$target.attr('data-model_name')||'mail.mail';var modelSelection=qweb.render("website_form.field_many2one",{field:{name:'model_selection',string:'Action',required:true,records:_.map(models,function(m){return{id:m.id,display_name:m.website_form_label||m.name,selected:(m.model===selectedModel)?1:null,};}),}});var successPage=qweb.render("website_form.field_char",{field:{name:'success_page',string:'Thank You Page',value:self.$target.attr('data-success_page')}});var save=function(){var successPage=this.$el.find("[name='success_page']").val();self.init_form();self.$target.attr('data-success_page',successPage);this.$el.find('.o_form_parameter_custom').each(function(){var $field=$(this).find('.o_website_form_input');var value=$field.val();var fieldName=$field.attr('name');self.$target.find('.form-group:has("[name='+fieldName+']")').remove();if(value){var $hiddenField=$(qweb.render('website_form.field_char',{field:{name:fieldName,value:value,}})).addClass('d-none');self.$target.find('.form-group:has(".o_website_form_send")').before($hiddenField);}});};var cancel=function(){if(!self.$target.attr('data-model_name')){self.$target.remove();}};var $content=$('<form role="form">'+modelSelection+successPage+'</form>');var dialog=new FormEditorDialog(self,{title:'Form Parameters',size:'medium',$content:$content,}).open();dialog.on('closed',this,cancel);dialog.on('save',this,ev=>{ev.stopPropagation();save.call(dialog);});wUtils.autocompleteWithPages(self,$content.find("input[name='success_page']"));self.originSuccessPage=$content.find("input[name='success_page']").val();self.originFormID=$content.find("[name='model_selection']").val();self._renderParameterFields($content);$content.find("[name='model_selection']").on('change',function(){self._renderParameterFields($content);});});},_renderParameterFields:function($modal){var self=this;var $successPage=$modal.find("[name='success_page']");$modal.find('.o_form_parameter_custom').remove();var id=$modal.find("[name='model_selection']").val();this.activeForm=_.findWhere(this.models,{id:parseInt(id)});var formKey=this.activeForm.website_form_key;if(!formKey){return Promise.resolve();}
var proms=[];var formInfo=FormEditorRegistry.get(formKey);if(this.originFormID===id){$successPage.val(this.originSuccessPage||formInfo.successPage||'/contactus-thank-you');}else{$successPage.val(formInfo.successPage||'/contactus-thank-you');}
if(formInfo.fields&&formInfo.fields.length){_.each(formInfo.fields,function(field){var value=self.$target.find('[name="'+field.name+'"]').val();proms.push(self.render_field(field).then(function($field){$field.addClass('o_form_parameter_custom');$field.find('label').removeAttr('contenteditable');$field.find('label').attr('title',field.title);$field.find('.o_website_form_input').val(value);$modal.append($field);}));});}
return Promise.all(proms);},website_form_field_modal:function(previewMode,value,$li){var self=this;this.fields().then(function(fields){var fields_array=_.map(fields,function(v,k){return{id:k,name:v.name,display_name:v.string};});var fields_in_form=_.map(self.$target.find('.col-form-label'),function(label){return label.getAttribute('for');});var available_fields=_.filter(fields_array,function(field){return!_.contains(fields_in_form,field.name);});var fieldSelection=qweb.render("website_form.field_many2one",{field:{name:'field_selection',string:'Field',records:_.sortBy(available_fields,'display_name')}});var save=function(){var selectedFieldName=this.$el.find("[name='field_selection']").val();var selectedField=fields[selectedFieldName];self.append_field(selectedField);};var dialog=new FormEditorDialog(self,{title:'Field Parameters',size:'medium',$content:'<form role="form">'+fieldSelection+'</form>',}).open();dialog.on('save',this,ev=>{ev.stopPropagation();save.call(dialog);});});},website_form_custom_field:function(previewMode,value,$li){var default_field_name='Custom '+$li.text();this.append_field({name:default_field_name,string:default_field_name,custom:true,type:value,records:[{id:'Option 1',display_name:_t('Option 1')},{id:'Option 2',display_name:_t('Option 2')},{id:'Option 3',display_name:_t('Option 3')}],selection:[['Option 1',_t('Option 1')],['Option 2',_t('Option 2')],['Option 3',_t('Option 3')],]});},append_field:function(field){var self=this;this.render_field(field).then(function(field){self.$target.find(".form-group:has('.o_website_form_send')").before(field);});},render_field:function(field){field.required=field.required?1:null;var fieldRelationProm;if(field.relation&&field.relation!=='ir.attachment'){fieldRelationProm=this._rpc({model:field.relation,method:'search_read',args:[field.domain||[],['display_name']],}).then(function(records){field.records=records;});}
return Promise.resolve(fieldRelationProm).then(function(){var $content=$(qweb.render("website_form.field_"+field.type,{field:field}));$content.find('label:not(:has(span)), label span').addClass('o_fake_editable').attr('contentEditable',true);return $content;});},onBuilt:function(){this.website_form_model_modal('click',null,null);},onFocus:function(){this.$el.filter('[data-website_form_model_modal]').toggleClass('d-none',this.$target.attr('hide-change-model')!==undefined);},init_form:function(){var self=this;var modelName=this.activeForm.model;var formKey=this.activeForm.website_form_key;if(modelName!==this.$target.attr('data-model_name')){this.$target.attr('data-model_name',modelName);this.$target.find(".form-field:not(:has('.o_website_form_send')), .o_form_heading").remove();if(formKey){var formInfo=FormEditorRegistry.get(formKey);ajax.loadXML(formInfo.defaultTemplatePath,qweb).then(function(){$('<h1>',{class:'o_form_heading',text:self.activeForm.website_form_label,contentEditable:true,}).prependTo(self.$target.find('.container'));self.$target.find('.form-group:has(".o_website_form_send")').before($(qweb.render(formInfo.defaultTemplateName)));});}else{this.fetch_model_fields().then(function(fields){_.each(fields,function(field,field_name){if(field.required){self.append_field(field);}});});}}},cleanForSave:function(){var model=this.$target.data('model_name');if(model){var fields=this.$target.find('input.form-field[name=email_to], .form-field:not(.o_website_form_custom) :input').map(function(_,node){return node.getAttribute('name');}).get();if(fields.length){this._rpc({model:'ir.model.fields',method:'formbuilder_whitelist',args:[model,_.uniq(fields)],});}}
this.$target.find('.o_has_error').removeClass('o_has_error').find('.form-control, .custom-select').removeClass('is-invalid');this.$target.find('#o_website_form_result').empty();var custom_inputs=this.$target.find('.o_website_form_custom .o_website_form_input');_.each(custom_inputs,function(input,index){var field_label=$(input).closest('.form-field').find('label:first');input.name=field_label.text().trim();field_label.attr('for',input.name);if(input.type==='radio'||input.type==='checkbox'){var checkbox_label=$(input).closest('label').text().trim();if(checkbox_label){input.value=checkbox_label;}}});}});options.registry['website_form_editor_field']=options.Class.extend({xmlDependencies:['/website_form/static/src/xml/website_form_editor.xml'],website_form_field_require:function(previewMode,value,$li){this.$target.find('.o_website_form_input').each(function(index,input){input.required=!input.required;});}});options.registry['website_form_editor_field_select']=options.Class.extend({xmlDependencies:['/website_form/static/src/xml/website_form_editor.xml'],start:function(){if(!this.$target.find('#editable_select').length){var self=this;var select=this.$target.find('select');select.hide();this.editable_select=$('<div id="editable_select" class="form-control o_website_form_input" contenteditable="true"/>');_.each(select.children(),function(option){self.editable_select.append($('<div id="'+$(option).attr('value')+'" class="o_website_form_select_item">'+$(option).text().trim()+'</div>'));});select.after(this.editable_select);}
return this._super.apply(this,arguments);},cleanForSave:function(){if(this.$target.find('#editable_select').length){var self=this;var select=this.$target.find('select');var field={name:select.attr('name'),string:this.$target.find('.col-form-label').text().trim(),required:self.$target.hasClass('o_website_form_required'),custom:self.$target.hasClass('o_website_form_custom'),};var records=[];var editable_options=this.$target.find('#editable_select .o_website_form_select_item');_.each(editable_options,function(option){records.push({id:self.$target.hasClass('o_website_form_custom')?$(option).text().trim():$(option).attr('id'),display_name:$(option).text().trim()});});field.records=records;var $new_select=$(qweb.render("website_form.field_many2one",{field:field}));if(this.$target.hasClass('o_website_form_required_custom')){$new_select.addClass('o_website_form_required_custom');}
if(this.$target.hasClass('o_website_form_field_hidden')){$new_select.addClass('o_website_form_field_hidden');}
var labelClasses=this.$target.find('> div:first').attr('class');var inputClasses=this.$target.find('> div:last').attr('class');$new_select.find('> div:first').attr('class',labelClasses);$new_select.find('> div:last').attr('class',inputClasses);this.$target.replaceWith($new_select);}}});Wysiwyg.include({_editorOptions:function(){var options=this._super.apply(this,arguments);var isUnbreakableNode=options.isUnbreakableNode;options.isUnbreakableNode=function(node){var isSelItem=$(node).hasClass('o_website_form_select_item');return isUnbreakableNode(node)&&!isSelItem;};return options;},});var disable_overlay_button_option=options.Class.extend({xmlDependencies:['/website_form/static/src/xml/website_form_editor.xml'],disable_button:function(button_name,message){var className='oe_snippet_'+button_name;this.$overlay.add(this.$overlay.data('$optionsSection')).on('click','.'+className,this.prevent_button);var $button=this.$overlay.add(this.$overlay.data('$optionsSection')).find('.'+className);$button.attr('title',message).tooltip({delay:0});$button.removeClass(className);},prevent_button:function(event){event.preventDefault();event.stopImmediatePropagation();}});options.registry['website_form_editor_field_model']=disable_overlay_button_option.extend({start:function(){this.disable_button('clone',_t('You can\'t duplicate a model field.'));return this._super.apply(this,arguments);}});options.registry['website_form_editor_field_required']=disable_overlay_button_option.extend({start:function(){this.disable_button('remove',_t('You can\'t remove a field that is required by the model itself.'));return this._super.apply(this,arguments);}});options.registry['website_form_editor_field_x2many']=disable_overlay_button_option.extend({start:function(){this.disable_button('clone',_t('You can\'t duplicate an item which refers to an actual record.'));return this._super.apply(this,arguments);}});});;

/* /website_form/static/src/js/website_form_editor_registry.js defined in bundle 'website.assets_editor' */
odoo.define('website_form.form_editor_registry',function(require){'use strict';var Registry=require('web.Registry');return new Registry();});odoo.define('website_form.send_mail_form',function(require){'use strict';var core=require('web.core');var FormEditorRegistry=require('website_form.form_editor_registry');var _t=core._t;FormEditorRegistry.add('send_mail',{defaultTemplateName:'website_form.default_contactus_form',defaultTemplatePath:'/website_form/static/src/xml/website_form.xml',fields:[{name:'email_to',type:'char',required:true,string:_t('Recipient Email'),}],});});